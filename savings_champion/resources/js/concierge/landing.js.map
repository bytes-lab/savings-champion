{"version":3,"sources":["concierge/landing.coffee"],"names":[],"mappings":"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","file":"concierge/landing.js","sourceRoot":"/source/","sourcesContent":["# using jQuery\ngetCookie = (name) ->\n  if document.cookie and document.cookie isnt \"\"\n    cookies = document.cookie.split(\";\")\n    i = 0\n\n    while i < cookies.length\n      cookie = jQuery.trim(cookies[i])\n\n      # Does this cookie string begin with the name we want?\n      if cookie.substring(0, name.length + 1) is (name + \"=\")\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1))\n        break\n      i++\n  cookieValue\n\ncsrfSafeMethod = (method) ->\n\n  # these HTTP methods do not require CSRF protection\n  /^(GET|HEAD|OPTIONS|TRACE)$/.test method\ncsrftoken = getCookie(\"csrftoken\")\n$.ajaxSetup beforeSend: (xhr, settings) ->\n  xhr.setRequestHeader \"X-CSRFToken\", csrftoken  if not csrfSafeMethod(settings.type) and not @crossDomain\n  return\n\nif ($(\".js-form-part\").length > 0)\n  formset = $(\".js-form-part\").djangoFormset(\n    deleteButtonText: '<span class=\"glyphicon glyphicon-remove\"></span> Remove account'\n  );\n  $('body').on 'click', '.add-pool', (event) ->\n    formset.addForm();\n    return\n\n$('body').on 'click', '.js-tool-index', (event) ->\n  event_target = $(event.target)\n  form = event_target.siblings('form')\n  event_target.removeClass('btn-info')\n  event_target.addClass('btn-danger')\n  event_target.val('Saving...')\n  form.submit()\n  return\n\n$('body').on 'click', '.js-stage-one', (event) ->\n  event_target = $(event.target)\n  form = event_target.siblings('form')\n  event_target.removeClass('btn-info')\n  event_target.addClass('btn-danger')\n  event_target.val('Saving...')\n  form.submit()\n  return\n\n$('body').on('shown.bs.tab', 'a[data-toggle=\"tab\"]', (e) ->\n  current_tab = $(e.target)\n  previous_tab = $(e.relatedTarget)\n  accountType = current_tab.data('accountType')\n  if accountType in ['personal', 'business', 'charity']\n    $('.js-concierge-tool').show()\n    $('.js-concierge-tool-unavailable').hide()\n  else\n    $('.js-concierge-tool').hide()\n    $('.js-concierge-tool-unavailable').show()\n  return\n)\n\ntask_update = (data, textStatus, jqXHR) ->\n  if(typeof data == \"object\")\n    setTimeout(ajax_task_check, 2000)\n\n  else\n    $('.loading').replaceWith(data)\n  return\n\ntask_failed = (data, textStatus, jqXHR) ->\n  return\n\najax_task_check = ->\n  if ($(\".loading\").length = 0)\n    return\n  loading_div = $(\".loading\")\n  url = loading_div.data('url')\n  worst_case_task_id = loading_div.data('worstCaseTaskId')\n  best_case_task_id = loading_div.data('bestCaseTaskId')\n  $.ajax(\n    url,\n    'data':\n      'worst_engine_output_task_id': worst_case_task_id,\n      'best_engine_output_task_id': best_case_task_id,\n    'method': 'post',\n    'success': task_update,\n    'error': task_failed\n  )\n  return\n\nif ($(\".loading\").length > 0)\n  ajax_task_check()\n"]}