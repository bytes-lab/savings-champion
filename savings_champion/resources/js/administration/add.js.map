{"version":3,"sources":["administration/add.coffee"],"names":[],"mappings":"AAGA;AAAA,MAAA;;EAAA,iBAAA,GAAoB,SAAA;IAClB;AAAA,QAAA;IACA,eAAA,GAAkB,CAAA,CAAE,sBAAF;IAClB,gBAAA,GAAmB,CAAA,CAAE,uBAAF;IACnB,sBAAA,GAAyB,CAAA,CAAE,4BAAF;IACzB,gBAAgB,CAAC,OAAjB,CAAyB;MAAA,KAAA,EAAO,MAAP;KAAzB;IACA,eAAe,CAAC,OAAhB,CAAwB;MAAA,KAAA,EAAO,MAAP;KAAxB;IACA,sBAAsB,CAAC,OAAvB,CAA+B;MAAA,KAAA,EAAO,MAAP;KAA/B;IACA,eAAe,CAAC,KAAhB,CAAA;IAGA,gBAAgB,CAAC,EAAjB,CAAoB,QAApB,EAA8B,SAAA;AAC5B,UAAA;MAAA,QAAA,GAAW,CAAA,CAAE,IAAF,CAAO,CAAC,OAAR,CAAA,CAAiB,CAAC,GAAlB,CAAA;MACX,OAAA,GAAU,CAAA,CAAE,IAAF,CAAO,CAAC,OAAR,CAAgB,eAAhB,CAAgC,CAAC,IAAjC,CAAsC,eAAtC,CAAsD,CAAC,GAAvD,CAAA,CAA4D,CAAC,OAA7D,CAAqE,IAArE,EAA2E,EAA3E;MACV,MAAA,GAAS,CAAA,CAAE,IAAF;MACT,cAAA,GAAiB,CAAA,CAAE,IAAF,CAAO,CAAC,OAAR,CAAgB,eAAhB,CAAgC,CAAC,IAAjC,CAAsC,sBAAtC;MACjB,cAAc,CAAC,KAAf,CAAA;MACA,cAAc,CAAC,MAAf,CAAsB,wDAAtB;MACA,cAAc,CAAC,OAAf,CAAuB,KAAvB,EAA8B,GAA9B;MACA,IAAG,QAAA,GAAW,CAAX,IAAiB,OAAA,GAAU,CAA9B;QACE,cAAc,CAAC,OAAf,CAAuB,QAAvB,EAAiC,KAAjC;QACA,gBAAA,CAAiB,QAAjB,EAA2B,OAA3B,EAAoC,MAApC,EAFF;;IAR4B,CAA9B;IAaA,CAAA,CAAE,eAAF,CAAkB,CAAC,EAAnB,CAAsB,OAAtB,EAA+B,SAAA;AAC7B,UAAA;MAAA,QAAA,GAAW,CAAA,CAAE,IAAF,CAAO,CAAC,OAAR,CAAgB,eAAhB,CAAgC,CAAC,IAAjC,CAAsC,iBAAtC,CAAwD,CAAC,OAAzD,CAAiE,KAAjE;MACX,OAAA,GAAU,CAAA,CAAE,IAAF,CAAO,CAAC,GAAR,CAAA,CAAa,CAAC,OAAd,CAAsB,IAAtB,EAA4B,EAA5B;MACV,MAAA,GAAS,CAAA,CAAE,IAAF;MACT,cAAA,GAAiB,CAAA,CAAE,IAAF,CAAO,CAAC,OAAR,CAAgB,eAAhB,CAAgC,CAAC,IAAjC,CAAsC,sBAAtC;MACjB,cAAc,CAAC,KAAf,CAAA;MACA,cAAc,CAAC,MAAf,CAAsB,wDAAtB;MACA,cAAc,CAAC,OAAf,CAAuB,KAAvB,EAA8B,GAA9B;MACA,IAAG,QAAA,GAAW,CAAX,IAAiB,OAAA,GAAU,CAA9B;QACE,cAAc,CAAC,OAAf,CAAuB,QAAvB,EAAiC,KAAjC;QACA,gBAAA,CAAiB,QAAjB,EAA2B,OAA3B,EAAoC,MAApC;QACA,cAAc,CAAC,OAAf,CAAuB,KAAvB,EAA8B,GAA9B,EAHF;;IAR6B,CAA/B;IAcA,gBAAgB,CAAC,MAAjB,CAAwB,SAAA;AACtB,UAAA;MAAA,EAAA,GAAK,CAAA,CAAE,IAAF,CAAO,CAAC,GAAR,CAAA;MACL,YAAA,CAAa,EAAb;IAFsB,CAAxB;IAKA,sBAAsB,CAAC,MAAvB,CAA8B,SAAA;AAC5B,UAAA;MAAA,QAAA,GAAW,CAAA,CAAE,IAAF,CAAO,CAAC,GAAR,CAAA;MACX,MAAA,GAAS,CAAA,CAAE,IAAF;MACT,YAAA,GAAe,CAAA,CAAE,IAAF,CAAO,CAAC,OAAR,CAAgB,eAAhB,CAAgC,CAAC,IAAjC,CAAsC,qBAAtC;MACf,YAAY,CAAC,KAAb,CAAA;MACA,IAAG,QAAA,GAAW,CAAd;QACE,mBAAA,CAAoB,QAApB,EAA8B,MAA9B,EADF;OAAA,MAAA;QAGE,YAAY,CAAC,MAAb,CAAoB,yDAApB,EAHF;;IAL4B,CAA9B;EA3CkB;;EAuDpB,gBAAA,GAAmB,SAAC,QAAD,EAAW,OAAX,EAAoB,MAApB;IACjB;IACA,CAAC,CAAC,GAAF,CAAM,2CAAN,EACE;MAAA,UAAA,EAAY,QAAZ;MACA,UAAA,EAAY,OADZ;KADF,EAGE,SAAC,IAAD;AACA,UAAA;MAAA,OAAA,GAAU;MACV,CAAC,CAAC,IAAF,CAAO,IAAP,EAAa,SAAC,CAAD;QACX,OAAA,IAAW,kBAAA,GAAqB,IAAK,CAAA,CAAA,CAAG,CAAA,CAAA,CAA7B,GAAkC,KAAlC,GAA0C,IAAK,CAAA,CAAA,CAAG,CAAA,CAAA,CAAlD,GAAuD;MADvD,CAAb;MAIA,IAA4B,OAAQ,IAAK,CAAA,CAAA,CAAb,KAAsB,WAAlD;QAAA,YAAA,CAAa,IAAK,CAAA,CAAA,CAAG,CAAA,CAAA,CAArB,EAAA;;MACA,cAAA,GAAiB,MAAM,CAAC,OAAP,CAAe,eAAf,CAA+B,CAAC,IAAhC,CAAqC,sBAArC;MACjB,cAAc,CAAC,MAAf,CAAsB,OAAtB;MACA,cAAc,CAAC,OAAf,CAAuB,QAAvB,EAAiC,IAAjC;IATA,CAHF;EAFiB;;EAkBnB,mBAAA,GAAsB,SAAC,QAAD,EAAW,MAAX;IACpB;IACA,CAAC,CAAC,GAAF,CAAM,uCAAN,EACE;MAAA,UAAA,EAAY,QAAZ;KADF,EAEE,SAAC,IAAD;AACA,UAAA;MAAA,OAAA,GAAU;MACV,CAAC,CAAC,IAAF,CAAO,IAAP,EAAa,SAAC,CAAD;QACX,OAAA,IAAW,kBAAA,GAAqB,IAAK,CAAA,CAAA,CAAG,CAAA,CAAA,CAA7B,GAAkC,KAAlC,GAA0C,IAAK,CAAA,CAAA,CAAG,CAAA,CAAA,CAAlD,GAAuD;MADvD,CAAb;MAIA,MAAM,CAAC,OAAP,CAAe,eAAf,CAA+B,CAAC,IAAhC,CAAqC,qBAArC,CAA2D,CAAC,MAA5D,CAAmE,OAAnE;IANA,CAFF;EAFoB;;EActB,YAAA,GAAe,SAAC,WAAD;IACb;IACA,CAAC,CAAC,IAAF,CAAO,+BAAP,EACE;MAAA,SAAA,EAAW,WAAX;KADF,EAEE,SAAC,IAAD;AACA,UAAA;MAAA,kBAAA,GAAqB,CAAA,CAAE,qBAAF;MACrB,IAAG,IAAA,KAAQ,MAAX;QACE,kBAAkB,CAAC,IAAnB,CAAA;QACA,kBAAkB,CAAC,IAAnB,CAAwB,YAAxB,CAAqC,CAAC,QAAtC,CAA+C,UAA/C;QACA,kBAAkB,CAAC,IAAnB,CAAwB,YAAxB,CAAqC,CAAC,IAAtC,CAA2C,KAA3C,EAAkD,GAAlD,EAHF;OAAA,MAAA;QAKE,kBAAkB,CAAC,IAAnB,CAAwB,YAAxB,CAAqC,CAAC,WAAtC,CAAkD,UAAlD;QACA,kBAAkB,CAAC,IAAnB,CAAwB,YAAxB,CAAqC,CAAC,UAAtC,CAAiD,KAAjD;QACA,kBAAkB,CAAC,IAAnB,CAAA,EAPF;;IAFA,CAFF;EAFa;;EAiBf,iBAAA,GAAoB,SAAA;IAClB;AAAA,QAAA;IACA,mBAAA,GAAsB,CAAA,CAAE,oBAAF;IACtB,CAAC,CAAC,IAAF,CACE;MAAA,IAAA,EAAM,mBAAmB,CAAC,SAApB,CAAA,CAAN;MACA,IAAA,EAAM,mBAAmB,CAAC,IAApB,CAAyB,QAAzB,CADN;MAEA,GAAA,EAAK,mBAAmB,CAAC,IAApB,CAAyB,QAAzB,CAFL;MAGA,OAAA,EAAS,SAAC,QAAD;QACP,CAAA,CAAE,oBAAF,CAAuB,CAAC,IAAxB,CAA6B,QAA7B;QACA,CAAA,CAAE,wBAAF,CAA2B,CAAC,QAAQ,CAAC,MAArC,CAAA;MAFO,CAHT;KADF;EAHkB;;EAapB,gBAAA,GAAmB,SAAA;IACjB;AAAA,QAAA;IACA,kBAAA,GAAqB,CAAA,CAAE,mBAAF;IACrB,CAAC,CAAC,IAAF,CACE;MAAA,IAAA,EAAM,kBAAkB,CAAC,SAAnB,CAAA,CAAN;MACA,IAAA,EAAM,kBAAkB,CAAC,IAAnB,CAAwB,QAAxB,CADN;MAEA,GAAA,EAAK,kBAAkB,CAAC,IAAnB,CAAwB,QAAxB,CAFL;MAGA,OAAA,EAAS,SAAC,QAAD;QACP,kBAAkB,CAAC,IAAnB,CAAwB,QAAxB;QACA,CAAA,CAAE,qBAAF,CAAwB,CAAC,QAAQ,CAAC,MAAlC,CAAA;MAFO,CAHT;KADF;EAHiB;;EAanB,eAAA,GAAkB,SAAA;IAChB;AAAA,QAAA;IACA,iBAAA,GAAoB,CAAA,CAAE,oBAAF;IACpB,CAAC,CAAC,IAAF,CACE;MAAA,IAAA,EAAM,iBAAiB,CAAC,SAAlB,CAAA,CAAN;MACA,IAAA,EAAM,iBAAiB,CAAC,IAAlB,CAAuB,QAAvB,CADN;MAEA,GAAA,EAAK,iBAAiB,CAAC,IAAlB,CAAuB,QAAvB,CAFL;MAGA,OAAA,EAAS,SAAC,QAAD;QACP,CAAC,CAAC,QAAQ,CAAC,KAAX,CAAA;MADO,CAHT;KADF;EAHgB;;EAYlB,UAAA,GAAa,SAAA;IACX;IACA,QAAQ,CAAC,MAAT,CAAgB,IAAhB;EAFW;;EAIb,CAAA,CAAE,QAAF,CAAW,CAAC,KAAZ,CAAkB,SAAA;IAChB;IACA,CAAC,CAAC,SAAF,CAAY;MAAA,UAAA,EAAY,SAAC,GAAD,EAAM,QAAN;AACtB,YAAA;QAAA,SAAA,GAAY,SAAC,IAAD;AACV,cAAA;UAAA,WAAA,GAAc;UACd,IAAG,QAAQ,CAAC,MAAT,IAAoB,QAAQ,CAAC,MAAT,KAAqB,EAA5C;YACE,OAAA,GAAU,QAAQ,CAAC,MAAM,CAAC,KAAhB,CAAsB,GAAtB;YACV,CAAA,GAAI;AAEJ,mBAAM,CAAA,GAAI,OAAO,CAAC,MAAlB;cACE,MAAA,GAAS,MAAM,CAAC,IAAP,CAAY,OAAQ,CAAA,CAAA,CAApB;cACT,IAAG,MAAM,CAAC,SAAP,CAAiB,CAAjB,EAAoB,IAAI,CAAC,MAAL,GAAc,CAAlC,CAAA,KAAwC,CAAC,IAAA,GAAO,GAAR,CAA3C;gBACE,WAAA,GAAc,kBAAA,CAAmB,MAAM,CAAC,SAAP,CAAiB,IAAI,CAAC,MAAL,GAAc,CAA/B,CAAnB;AACd,sBAFF;;cAGA,CAAA;YALF,CAJF;;iBAUA;QAZU;QAaZ,IAAA,CAAA,CAAmE,UAAU,CAAC,IAAX,CAAgB,QAAQ,CAAC,GAAzB,CAAA,IAAiC,WAAW,CAAC,IAAZ,CAAiB,QAAQ,CAAC,GAA1B,CAApG,CAAA;UAAA,GAAG,CAAC,gBAAJ,CAAqB,aAArB,EAAoC,SAAA,CAAU,WAAV,CAApC,EAAA;;MAdsB,CAAZ;KAAZ;IAiBA,CAAA,CAAE,sBAAF,CAAyB,CAAC,KAA1B,CAAgC,SAAA;MAC9B,CAAA,CAAE,qBAAF,CAAwB,CAAC,IAAzB,CAAA;MACA,CAAA,CAAE,wBAAF,CAA2B,CAAC,IAA5B,CAAA;IAF8B,CAAhC;IAKA,CAAA,CAAE,cAAF,CAAiB,CAAC,KAAlB,CAAwB,SAAA;MACtB,CAAA,CAAE,wBAAF,CAA2B,CAAC,IAA5B,CAAA;MACA,CAAA,CAAE,qBAAF,CAAwB,CAAC,IAAzB,CAAA;IAFsB,CAAxB;IAKA,iBAAA,CAAA;IACA,CAAA,CAAE,uBAAF,CAA0B,CAAC,MAA3B,CAAkC,SAAA;MAChC,MAAM,CAAC,OAAO,CAAC,GAAf,CAAmB,kBAAnB;IADgC,CAAlC;IAIA,CAAA,CAAE,eAAF,CAAkB,CAAC,EAAnB,CAAsB,OAAtB,EAA+B,SAAA;MAC7B,MAAM,CAAC,OAAO,CAAC,GAAf,CAAmB,iBAAnB;IAD6B,CAA/B;IAIA,CAAA,CAAE,sBAAF,CAAyB,CAAC,MAA1B,CAAiC,SAAA;MAC/B,MAAM,CAAC,OAAO,CAAC,GAAf,CAAmB,iBAAnB;IAD+B,CAAjC;EAtCgB,CAAlB;AAlJA","file":"administration/add.js","sourceRoot":"/source/","sourcesContent":["# Does this cookie string begin with the name we want?\n\n# Only send the token to relative URLs i.e. locally.\nrebindInputChange = ->\n  \"use strict\"\n  $product_select = $(\"select.productselect\")\n  $provider_select = $(\"select.providerselect\")\n  $fixed_provider_select = $(\"select.fixedproviderselect\")\n  $provider_select.select2 width: \"100%\"\n  $product_select.select2 width: \"100%\"\n  $fixed_provider_select.select2 width: \"100%\"\n  $product_select.empty()\n\n  # Document.ready can't handle the additional fields\n  $provider_select.on \"change\", ->\n    provider = $(this).select2().val()\n    balance = $(this).closest(\".product-form\").find(\".balanceinput\").val().replace(/,/g, \"\")\n    parent = $(this)\n    product_select = $(this).closest(\".product-form\").find(\"select.productselect\")\n    product_select.empty()\n    product_select.append \"<option value=\\\"0\\\">Please enter your details</option>\"\n    product_select.select2 \"val\", \"0\"\n    if provider > 0 and balance > 0\n      product_select.select2 \"enable\", false\n      retrieveProducts provider, balance, parent\n    return\n\n  $(\".balanceinput\").on \"keyup\", ->\n    provider = $(this).closest(\".product-form\").find(\".providerselect\").select2(\"val\")\n    balance = $(this).val().replace(/,/g, \"\")\n    parent = $(this)\n    product_select = $(this).closest(\".product-form\").find(\"select.productselect\")\n    product_select.empty()\n    product_select.append \"<option value=\\\"0\\\">Please enter your details</option>\"\n    product_select.select2 \"val\", \"0\"\n    if provider > 0 and balance > 0\n      product_select.select2 \"enable\", false\n      retrieveProducts provider, balance, parent\n      product_select.select2 \"val\", \"0\"\n    return\n\n  $provider_select.change ->\n    id = $(this).val()\n    checkOpening id\n    return\n\n  $fixed_provider_select.change ->\n    provider = $(this).val()\n    parent = $(this)\n    account_type = $(this).closest(\".product-form\").find(\"select.account-type\")\n    account_type.empty()\n    if provider > 0\n      retrieveAccountType provider, parent\n    else\n      account_type.append \"<option value =\\\"0\\\">Please enter your details</option>\"\n    return\n\n  return\nretrieveProducts = (provider, balance, parent) ->\n  \"use strict\"\n  $.get \"/best-buys/ajax/retrievepersonalproducts/\",\n    providerid: provider\n    balanceval: balance\n  , (data) ->\n    options = \"\\\"<option value=\\\"0\\\">Please enter your details</option>\"\n    $.each data, (i) ->\n      options += \"<option value=\\\"\" + data[i][0] + \"\\\">\" + data[i][1] + \"</option>\"\n      return\n\n    checkOpening data[0][0]  if typeof (data[0]) isnt \"undefined\"\n    product_select = parent.closest(\".product-form\").find(\"select.productselect\")\n    product_select.append options\n    product_select.select2 \"enable\", true\n    return\n\n  return\nretrieveAccountType = (provider, parent) ->\n  \"use strict\"\n  $.get \"/best-buys/ajax/retrievefixedchoices/\",\n    providerid: provider\n  , (data) ->\n    options = \"\"\n    $.each data, (i) ->\n      options += \"<option value=\\\"\" + data[i][0] + \"\\\">\" + data[i][1] + \"</option>\"\n      return\n\n    parent.closest(\".product-form\").find(\"select.account-type\").append options\n    return\n\n  return\ncheckOpening = (optionValue) ->\n  \"use strict\"\n  $.post \"/best-buys/ajax/checkopening/\",\n    productID: optionValue\n  , (data) ->\n    opening_date_group = $(\".opening-date-group\")\n    if data is \"True\"\n      opening_date_group.show()\n      opening_date_group.find(\".datestyle\").addClass \"required\"\n      opening_date_group.find(\".datestyle\").attr \"min\", \"1\"\n    else\n      opening_date_group.find(\".datestyle\").removeClass \"required\"\n      opening_date_group.find(\".datestyle\").removeAttr \"min\"\n      opening_date_group.hide()\n    return\n\n  return\najaxPortfolioCall = -> # catch the form's submit event\n  \"use strict\"\n  edit_portfolio_form = $(\"#editportfolioform\")\n  $.ajax # create an AJAX call...\n    data: edit_portfolio_form.serialize() # get the form data\n    type: edit_portfolio_form.attr(\"method\") # GET or POST\n    url: edit_portfolio_form.attr(\"action\") # the file to call\n    success: (response) -> # on success..\n      $(\"#editportfolioform\").html response # update the DIV\n      $(\"#add-variable-products\").colorbox.resize()\n      return\n\n  return\najaxReminderCall = -> # catch the form's submit event\n  \"use strict\"\n  edit_reminder_form = $(\"#editreminderform\")\n  $.ajax # create an AJAX call...\n    data: edit_reminder_form.serialize() # get the form data\n    type: edit_reminder_form.attr(\"method\") # GET or POST\n    url: edit_reminder_form.attr(\"action\") # the file to call\n    success: (response) -> # on success..\n      edit_reminder_form.html response # update the DIV\n      $(\"#add-fixed-products\").colorbox.resize()\n      return\n\n  return\najaxOpeningCall = -> # catch the form's submit event\n  \"use strict\"\n  opening_date_form = $(\".opening-date-form\")\n  $.ajax # create an AJAX call...\n    data: opening_date_form.serialize() # get the form data\n    type: opening_date_form.attr(\"method\") # GET or POST\n    url: opening_date_form.attr(\"action\") # the file to call\n    success: (response) -> # on success..\n      $.colorbox.close() # update the DIV\n      return\n\n  return\nreloadPage = ->\n  \"use strict\"\n  location.reload true\n  return\n$(document).ready ->\n  \"use strict\"\n  $.ajaxSetup beforeSend: (xhr, settings) ->\n    getCookie = (name) ->\n      cookieValue = null\n      if document.cookie and document.cookie isnt \"\"\n        cookies = document.cookie.split(\";\")\n        i = 0\n\n        while i < cookies.length\n          cookie = jQuery.trim(cookies[i])\n          if cookie.substring(0, name.length + 1) is (name + \"=\")\n            cookieValue = decodeURIComponent(cookie.substring(name.length + 1))\n            break\n          i++\n      cookieValue\n    xhr.setRequestHeader \"X-CSRFToken\", getCookie(\"csrftoken\")  unless /^http:.*/.test(settings.url) or /^https:.*/.test(settings.url)\n    return\n\n  $(\".add-products-button\").click ->\n    $(\"#add-fixed-products\").hide()\n    $(\"#add-variable-products\").show()\n    return\n\n  $(\".fixed-click\").click ->\n    $(\"#add-variable-products\").hide()\n    $(\"#add-fixed-products\").show()\n    return\n\n  rebindInputChange()\n  $(\"select.providerselect\").change ->\n    window.console.log \"Provider changes\"\n    return\n\n  $(\".balanceinput\").on \"keyup\", ->\n    window.console.log \"Balance changes\"\n    return\n\n  $(\"select.productselect\").change ->\n    window.console.log \"Product changes\"\n    return\n\n  return\n"]}