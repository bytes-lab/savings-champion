{"version":3,"sources":["topaccounts/topaccounts.coffee"],"names":[],"mappings":"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","file":"topaccounts/topaccounts.js","sourceRoot":"/source/","sourcesContent":["printContents = (id) ->\n  \"use strict\"\n  window.print()\n\n# Does this cookie string begin with the name we want?\n\n# Only send the token to relative URLs i.e. locally.\n\n#this runs when the form validated successfully\n#submit it the form\najaxEmailReminderCall = -> # catch the form's submit event\n  \"use strict\"\n  email_instructions_form = $(\".email-instructions-form\")\n  $.ajax # create an AJAX call...\n    data: email_instructions_form.serialize() # get the form data\n    type: email_instructions_form.attr(\"method\") # GET or POST\n    url: email_instructions_form.attr(\"action\") # the file to call\n    success: -> # on success..\n      window.location.href = $(\".no-reminder\").attr(\"href\")\n      return\n\n  return\ntoaster = (event) ->\n  \"use strict\"\n  if event is \"in\"\n    $(\"#bestbuy-modal\").modal \"show\"  if $.cookie(\"bestbuy-emails-modal\") isnt \"shown\"\n  else $(\"#bestbuy-modal\").modal \"hide\"  if event is \"out\"\n  return\n#STOP default action\nisElementInViewport = (el) ->\n  \"use strict\"\n  rect = undefined\n  try\n    rect = el.getBoundingClientRect()\n  catch e\n    return false\n  #or $(window).height()\n  rect.top >= 0 and rect.left >= 0 and rect.bottom <= (window.innerHeight or document.documentElement.clientHeight) and rect.right <= (window.innerWidth or document.documentElement.clientWidth) #or $(window).width()\nelementVisibilityMayChange = (el) ->\n  \"use strict\"\n  ->\n    if isElementInViewport(el)\n      toaster \"in\"\n    else\n      toaster \"out\"\n    return\n$(document).ready ->\n  \"use strict\"\n  apply_link = $(\".apply-link\")\n  apply_link.click ->\n    product = undefined\n    provider = undefined\n    provider = $(this).attr(\"provider\")\n    product = $(this).attr(\"product\")\n    ga \"send\", \"event\", \"BestBuys\", provider, product  if ga\n    return\n\n  apply_link = apply_link.not(\".authenticated\")\n  apply_link.click ->\n    product = undefined\n    provider = undefined\n    $(\".no-reminder\").attr \"href\", $(this).attr(\"href\")\n    provider = $(this).attr(\"provider\")\n    product = $(this).attr(\"product\")\n    return\n\n  apply_link.colorbox\n    inline: true\n    href: \"#apply-box\"\n\n  $.ajaxSetup beforeSend: (xhr, settings) ->\n    getCookie = (name) ->\n      cookieValue = null\n      if document.cookie and document.cookie isnt \"\"\n        cookies = document.cookie.split(\";\")\n        i = 0\n\n        while i < cookies.length\n          cookie = jQuery.trim(cookies[i])\n          if cookie.substring(0, name.length + 1) is (name + \"=\")\n            cookieValue = decodeURIComponent(cookie.substring(name.length + 1))\n            break\n          i++\n      cookieValue\n    xhr.setRequestHeader \"X-CSRFToken\", getCookie(\"csrftoken\")  unless /^http:.*/.test(settings.url) or /^https:.*/.test(settings.url)\n    return\n\n  $(\".email-instructions-form\").validate\n    submitHandler: ->\n      ajaxEmailReminderCall()\n      return\n\n    errorPlacement: ->\n      true\n\n  $(\".whatis\").click ->\n    $(this).closest(\".td-heading\").find(\".explanation\").toggle()\n    false\n\n  $(\".print-button\").click ->\n    ga \"send\", \"event\", \"BestBuys\", \"Display\", \"BestBuy Printed\"  if ga\n    printContents \".product-section\"\n    return\n\n  return\n\n$(\".js-best-buy-signup-toaster-container\").hover toaster(\"in\"), toaster(\"out\")\n$(\".js-weekly-rate-alerts\").on 'submit', (e) ->\n  \"use strict\"\n  postData = $(this).serialize()\n  formURL = $(this).attr \"action\"\n  $.ajax\n    url: formURL\n    type: 'post'\n    data: postData\n    cache: false\n    dataType: 'text'\n    success: ->\n      $(\".js-highlight-error\").hide()\n      $(\".js-weekly-bestbuy-trigger\").html \"<div class=\\\"alert alert-success\\\"><p>Thank you, you've been added to our best buy emails. <a href=\\\"/concierge/\\\">See what else we do?</a></p></div>\"\n      toaster \"out\"\n      $(window).unbind \"resize scroll\", handler\n      $(\".js-best-buy-signup-toaster-container\").unbind \"mouseenter mouseleave\", toaster\n      $.cookie \"bestbuy-emails-modal\", \"shown\"\n\n    error: (jqXHR, status, err) ->\n      $(\".js-highlight-error\").show()\n\n  e.preventDefault()\n\nel = document.getElementsByClassName(\"apply\")[0]\nhandler = elementVisibilityMayChange(el)\n\n#jQuery\n$(window).load ->\n  \"use strict\"\n  $(window).on \"resize scroll\", handler  if $(\".js-weekly-bestbuy-trigger\").is(\":visible\")\n  return\n\n$(window).on \"hidden.bs.modal\", ->\n  \"use strict\"\n  $(window).unbind \"resize scroll\", handler\n  $(\".js-best-buy-signup-toaster-container\").unbind \"mouseenter mouseleave\", toaster\n  return\n\n$(\".modal-footer > input.btn-danger\").click ->\n  \"use strict\"\n  ga \"send\", \"event\", \"BestBuys\", \"Modal\", \"Closed\"  if ga\n  $.cookie \"bestbuy-emails-modal\", \"shown\",\n    expires: 1\n\n  return\n\n$(\".modal-header > button.close\").click ->\n  \"use strict\"\n  ga \"send\", \"event\", \"BestBuys\", \"Modal\", \"Closed\"  if ga\n  $.cookie \"bestbuy-emails-modal\", \"shown\",\n    expires: 1\n\n  return\n\n$('body').on 'click', '.js-high-interest-current-accounts-5-percent', ->\n  ga \"send\", \"event\", \"BestBuys\", \"High Interest Banner\", \"Clicked\"  if ga\n  return\n\n$('body').on 'click', '.js-show-full-table', (event) ->\n  event_target = $(event.target)\n  event_target.hide()\n  event_target.siblings().show()\n  return\n\n$('body').on 'click', '.js-hide-full-table', (event) ->\n  event_target = $(event.target)\n  event_target.hide()\n  event_target.siblings().show()\n  return\n\n$('body').on 'show.bs.collapse', (event) ->\n  event_target = $(event.target)\n  event_target.find('.js-show-full-table').hide()\n  event_target.find('.js-hide-full-table').show()\n  return\n\n$('body').on 'hide.bs.collapse', (event) ->\n  event_target = $(event.target)\n  event_target.find('.js-show-full-table').show()\n  event_target.find('.js-hide-full-table').hide()\n  return"]}